<article class="article">
  <h1>Занятие 1 (24.10.2025 пт)</h1>
</article>


<div id="link-to-vgu2025cpp" class="btn-back">назад</div>


<article class="article">
  <p>2 группа. 17.00 - 19.30</p>
  <h2>Паттерны проектирования</h2>
</article>


<!-- Содержание -->
<article class="article">
  <h2>Содержание</h2>

  <p><a href="#p1">Стратегия</a></p>
  <p><a href="#p2">Шаблонный метод</a></p>
  <p><a href="#p3">Фабричный метод</a></p>
</article>


<!-- Стратегия -->
<article class="article">
  <div class="anchor" id="p1"></div>
  <h3>Стратегия</h3>

  <h4 class="center">Утиный пруд</h4>

  <p>На входе в зоопарк поставили большой экран. Нам поставили задачу на этом экране показывать уток. Пусть есть родительский класс Duck (утка), в котором определены методы quack (крякать), swim(плавать), display (показать). И есть два производных класса MallardDuck и RedheadDuck, в которых переопределены методы display, поскольку эти утки выглядят по разному.</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Duck</div>
        <div class="border">
          quack()
          <br>swim()
          <br>display()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">MallardDuck</div>
        <div class="border">
          display() {своя версия}
        </div>
      </div>

      <div>
        <div class="border">RedheadDuck</div>
        <div class="border">
          display() {своя версия}
        </div>
      </div>
    </div>
  </div>

  <h4 class="center">Летающие утки</h4>

  <p>Все получилось прекрасно. Но нам добавили задачу - утки должны летать.</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Duck</div>
        <div class="border">
          quack()
          <br>swim()
          <br>display()
          <br>fly()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">MallardDuck</div>
        <div class="border">
          display() {своя версия}
        </div>
      </div>

      <div>
        <div class="border">RedheadDuck</div>
        <div class="border">
          display() {своя версия}
        </div>
      </div>
    </div>
  </div>

  <h4 class="center">Резиновые утки</h4>

  <p>Утки научились летать. Но нам добавили задачу - добавить резиновых уток, которые не умеют летать, но умеют плавать и крякать. Хотя крякают они не по-настоящему, а по своему.</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Duck</div>
        <div class="border">
          quack()
          <br>swim()
          <br>display()
          <br>fly()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">MallardDuck</div>
        <div class="border">
          display() {своя версия}
        </div>
      </div>

      <div>
        <div class="border">RedheadDuck</div>
        <div class="border">
          display() {своя версия}
        </div>
      </div>

      <div>
        <div class="border">RubberDuck</div>
        <div class="border">
          quack() {своя версия}
          <br>display() {своя версия}
        </div>
      </div>
    </div>
  </div>

  <p>Поскольку резиновые утки летать не умеют, то метод fly надо переопределить</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">RubberDuck</div>
        <div class="border">
          quack() {своя версия}
          <br>display() {своя версия}
          <br>fly() {ничего не делает}
        </div>
      </div>
    </div>
  </div>

  <h4 class="center">Деревянные утки</h4>

  <p>Наступила осень. И нам добавили задачу - добавить деревянных уток, которые не умеют ни летать ни крякать, а только плавают.</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">DecoyDuck</div>
        <div class="border">
          quack() {ничего не делает}
          <br>display() {своя версия}
          <br>fly() {ничего не делает}
        </div>
      </div>
    </div>
  </div>

  <h4 class="center">Выделение интерфейсов</h4>

  <p>Получается уже два метода которые нужно переопределять так, чтобы их не было. Выделим эти методы в отдельные интерфейсы.</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Interface</div>
        <div class="border">Flyable</div>
        <div class="border">
          fly()
        </div>
      </div>

      <div>
        <div class="border">Interface</div>
        <div class="border">Quackable</div>
        <div class="border">
          quack()
        </div>
      </div>

      <div>
        <div class="border">Class</div>
        <div class="border">Duck</div>
        <div class="border">
          swim()
          <br>display()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">MallardDuck</div>
        <div class="border">
          display()
          <br>fly()
          <br>quack()
        </div>
      </div>

      <div>
        <div class="border">RedheadDuck</div>
        <div class="border">
          display()
          <br>fly()
          <br>quack()
        </div>
      </div>

      <div>
        <div class="border">RubberDuck</div>
        <div class="border">
          display()
          <br>quack()
        </div>
      </div>

      <div>
        <div class="border">DecoyDuck</div>
        <div class="border">
          display()
        </div>
      </div>
    </div>
  </div>

  <h4>Принцип проектирования 1</h4>

  <p>Выделить аспекты приложения, которые могут изменяться, и отделить их от тех, которые всегда остаются неизменными.</p>
  <p>Мы знаем, что fly() и quack() - части класса Duck, изменяющиеся в зависимости от субъекта.</p>
  <p>Чтобы отделить эти аспекты поведения от класса Duck, мы выносим оба метода за пределы класса Duck и создаем новый набор классов для представления каждого аспекта.</p>

  <h4>Принцип проектирования 2</h4>

  <p>Программировать на уровне интерфейса, а не на уровне реализации.</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Interface</div>
        <div class="border">FlyBehavior</div>
        <div class="border">
          fly()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">FlyWithWings</div>
        <div class="border">
          fly() {своя версия}
        </div>
      </div>

      <div>
        <div class="border">FlyNoWay</div>
        <div class="border">
          fly() {ничего не делает}
        </div>
      </div>
    </div>
  </div>

  <h4>Программирование на уровне реализации и интерфейса</h4>

  <p>Программирование на уровне реализации выглядит так:</p>
<pre>
Dog d = new Dog();
d.bark();
</pre>
  <p>Объявление d с типом Dog требует программирования на уровне конкретной реализации Animal.</p>

  <p>Программирование на уровне интерфейса:</p>
<pre>
Animal animal = new Dog();
animal.makeSound();
</pre>
  <p>Полиморфное использование ссылки.</p>
  <p>Или ище лучше, вместо жесткой фиксации подтипа в коде (new Dog()), объект конкретной реализации присваивается во время выполнения:</p>
<pre>
a = getAnimal();
a.makeSound();
</pre>
  <p>Фактический подтип Animal неизвестен... Важно лишь то, что он умеет реагировать на makeSound().</p>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Animal</div>
        <div class="border">
          makeSound()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">Dog</div>
        <div class="border">
          makeSound() {bark();}
          <br>bark() {гав-гав}
        </div>
      </div>

      <div>
        <div class="border">Cat</div>
        <div class="border">
          makeSound() {meow();}
          <br>meow() {мяу}
        </div>
      </div>
    </div>
  </div>

  <p>Абстрактный тип Animal может быть классом или интерфейсом. Dog и Cat это конкретные реализации</p>

  <h4>Интерфейсы</h4>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Interface</div>
        <div class="border">FlyBehavior</div>
        <div class="border">
          fly()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">FlyWithWings</div>
        <div class="border">
          fly() {своя версия}
        </div>
      </div>

      <div>
        <div class="border">FlyNoWay</div>
        <div class="border">
          fly() {ничего не делает}
        </div>
      </div>
    </div>
  </div>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Interface</div>
        <div class="border">QuackBehavior</div>
        <div class="border">
          quack()
        </div>
      </div>
    </div>

    <div class="flexrow">
      <div>
        <div class="border">Quack</div>
        <div class="border">
          quack() {кряканье}
        </div>
      </div>

      <div>
        <div class="border">Squeak</div>
        <div class="border">
          quack() {резиновые утки пищат}
        </div>
      </div>

      <div>
        <div class="border">MuteQuack</div>
        <div class="border">
          quack() {ничего не делает}
        </div>
      </div>
    </div>
  </div>

  <h4>Интеграция поведения с классом Duck</h4>

  <div class="flexcol">
    <div class="flexrow">
      <div>
        <div class="border">Class</div>
        <div class="border">Duck</div>
        <div class="border">
          FlyBehavior flyBehavior
          <br>QuackBehavior quackBehavior
        </div>
        <div class="border">
          performQuack()
          <br>sweem()
          <br>display()
          <br>performFly()
        </div>
      </div>
    </div>
  </div>

  <p>Реализация performQuack()</p>
<pre>
public class Duck {
  QuackBehavior quackBehavior;

  public void performQuack() {
    quackBehavior.quack();
  }
}

public class MallardDuck extends Duck {
  public MallardDuck() {
    quackBehavior = new Quack();
    flyBehavior = new FlyWithWings();
  }

  public void display() {
    System.out.println("I'm a real Mallard duck");
  }
}
</pre>

<pre>
class Duck {
protected:
  // две ссылочные переменные с типами интерфейсов поведения
  // переменные наследуются всеми субклассами Duck
  FlyBehavior* flyBehavior;
  QuackBehavior* quackBehavior;

public:

}
</pre>
</article>


<!-- Шаблонный метод -->
<article class="article">
  <div class="anchor" id="p2"></div>
  <h3>Шаблонный метод</h3>

</article>


<!-- Фабричный метод -->
<article class="article">
  <div class="anchor" id="p3"></div>
  <h3>Фабричный метод</h3>

</article>
