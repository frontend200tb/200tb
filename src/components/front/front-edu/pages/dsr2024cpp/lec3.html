<article class="article">
  <h1>Лекция 3 (7.10.2024)</h1>
</article>

<div id="link-to-dsr2024cpp" class="btn-back">назад</div>


<!-- Содержание -->
<article class="article">
  <h2>Содержание</h2>

  <p><a href="#plan">План работы</a></p>
  <p><a href="#loop">Циклы</a></p>
  <p><a href="#task1">Задача 1</a></p>
  <p><a href="#bad">Обработка "плохих" данных</a></p>
  <p><a href="#task2">Задача 2</a></p>
  <p><a href="#task3">Задача 3</a></p>
  <p><a href="#task4">Задача 4</a></p>
</article>


<!-- План работы -->
<article class="article">
  <div class="anchor" id="plan"></div>
  <h3>План работы</h3>

  <ol>
    <li>while</li>
    <li>for</li>
    <li>do while</li>
    <li>foreach</li>
    <li>Обработка "плохих" данных</li>
  </ol>
</article>


<!-- Циклы -->
<article class="article">
  <div class="anchor" id="loop"></div>
  <h3>Циклы</h3>

  <h4>Определение цикла while</h4>
<pre>
while (/*выражение*/)
{
  //тело_цикла
}
</pre>
  <p>Найти сумму чисел от 1 до 100</p>
<pre>
int i = 0;
int sum = 0;

while (i &lt; 100)
{
  i++;
  sum += i;
}

std::cout &lt;&lt; "Сумма чисел от 1 до 100 = " &lt;&lt; sum &lt;&lt; std::endl;
</pre>

  <h4>Определение вложенных циклов</h4>
<pre>
while (/*выражение1*/)
{
  //тело_цикла1
  while (/*выражение2*/)
  {
    //тело_цикла2
  }
}
</pre>
  <p>Вывести таблицу умножения от 1 до 9, используя вложенные циклы while</p>
<pre>
int a{}, b{};

while (a &lt; 10)
{
  a++;
  while (b &lt; 10)
  {
    b++;
    std::cout &lt;&lt; a &lt;&lt; "\tx\t" &lt;&lt; b &lt;&lt; "\t=\t" &lt;&lt; a * b &lt;&lt; std::endl;
  }
  std::cout &lt;&lt; std::endl;
  b = 0;
}
</pre>

  <h4>Бесконечные циклы</h4>
<pre>
while (true)
{
  // этот цикл будет выполняться бесконечно
}
</pre>
<pre>
int count = 12;

while (count &lt; 20) // всегда будет true
{
  std::cout &lt;&lt; count &lt;&lt; " "; // эта строка будет выполняться бесконечно
}
return 0; // эта строка никогда не выполнится
</pre>
  <p>Единственный способ выйти из бесконечного цикла - использовать операторы return, break, goto, выбросить исключение или воспользоваться функцией exit()</p>

  <h4>continue</h4>
  <p>Нужно вывести все четные числа от 0 до 30</p>
<pre>
int i{0};

while (i &lt; 30)
{
  i++;
  if (i % 2 == 0)
  {
    std::cout &lt;&lt; i &lt;&lt; " ";
  }
}
</pre>
<pre>
int i{0};

while (i &lt; 30)
{
  i++;
  if (i % 2 != 0)
  {
    continue;
  }
  std::cout &lt;&lt; i &lt;&lt; " ";
}
</pre>

  <h4>break</h4>
<pre>
while (i != 0)
{
  i--;
  std::cout &lt;&lt; i &lt;&lt; " ";
}
</pre>
<pre>
while (1)
{
  i--;
  if (i == 0)
  {
    break;
  }
  std::cout &lt;&lt; i &lt;&lt; " ";
}
</pre>
<pre>
int count = 1;
while (count &lt;= 50)
{
  if (count &lt; 10)
  {
    std::cout &lt;&lt; "0" &lt;&lt; count &lt;&lt; " ";
  }
  else
  {
    std::cout &lt;&lt; count &lt;&lt; " "
  }
  if (count % 10 == 0)
  {
    std::cout &lt;&lt; "\n";
  }
  ++count;
}
</pre>

  <h4>Определение цикла for</h4>
  <p>Вывести квадраты четных чисел от 0 до 20</p>
<pre>
int length{20};

for (int i = 0; i &lt; length; i++)
{
  if (i % 2 == 0)
  {
    std::cout &lt;&lt; i * i &lt;&lt; " ";
  }
}
</pre>

  <p>Вывести таблицу умножения от 1 до 9, используя вложенные циклы for</p>
<pre>
for (int i{1}; i &lt; 10; i++)
{
  for (int j{1}; j &lt; 10; j++)
  {
    std::cout &lt;&lt; i &lt;&lt; "\t x \t" &lt;&lt; j &lt;&lt; "\t = \t" &lt;&lt; i * j &lt;&lt; std::endl;
  }
  std::cout &lt;&lt; std::endl;
}
</pre>
</article>


<!-- Задача 1 -->
<article class="article">
  <div class="anchor" id="task1"></div>
  <h3>Задача 1</h3>

  <p>Напишите программу, где пользователь вводит любое целое положительное число. А программа суммирует все числа от 1 до введенного пользователем числа.</p>
<pre>
unsigned int temp{};
int sum{};
std::cin >> temp;

for (int j{1}; j &lt; temp; j++)
{
  sum += j;
}
</pre>

  <h4>ctime, srand, rand</h4>
<pre>
#include &lt;iostream&gt;
#include &lt;ctime&gt;

int main()
{
  srand(time(0));
  int balance = 8;

  do
  {
    std::cout &lt;&lt; "balance = " &lt;&lt; balance &lt;&lt; std::endl;
    int removal = rand() % 3;
    std::cout &lt;&lt; "removal = " &lt;&lt; removal &lt;&lt; std::endl;
    balance -= removal;
  } while (balance > 0);

  return 0;
}
</pre>
</article>


<!-- Обработка "плохих" данных -->
<article class="article">
  <div class="anchor" id="bad"></div>
  <h3>Обработка "плохих" данных</h3>

  <h4>Оператор извлечения</h4>
  <p>Если во входном буфере есть данные, то эти данные используются для извлечения.</p>
  <p>Если во входном буфере нет данных, то пользователю предлагается ввести данные (обычно именно это и происходит в большинстве случаев). Когда пользователь нажимает Enter, символ новой строки \n помещается во входной буфер</p>

  <h4>Оператор извлечения &gt;&gt;</h4>
  <p>Оператор &gt;&gt; извлекает столько данных из входного буфера в переменную, сколько позволяет размер самой переменной (игнорируя любые пробелы, табы и \n)</p>
  <p>Любые данные, которые не были извлечены остаются во входном буфере для последующего извлечения</p>
<pre>
int a;
std::cin &gt;&gt; a;
</pre>
  <p>Пользователь вводит 21Z. 21 записывается в переменную a, при этом в буфере остается Z\n</p>

  <h4>Ошибка 1: Извлечение выполняется успешно, но данные бесполезны</h4>
<pre>
while (true) // пока пользователь не введет корректные данные
{
  std::cout &lt;&lt; "Enter '+', '-', '*', '/' :";
  char sm;
  std::cin &gt;&gt; sm;

  // вывполняем проверку значений
  if (sm == '+'' || sm =='-' || sm == '*' || sm == '/') {
    return sm; // возвращаем данные в функцию main()
  } else { // иначе, сообщаем что что-то пошло не так
    std::cout &lt;&lt; "Invalid input. Try again.\n";
  }
}
</pre>

  <h4>Ошибка 2: Извлечение выполняется успешно, но пользователь вводит лишний текст</h4>
<pre>
std::cout &lt;&lt; "Enter a double value: ";
double a;
std::cin &gt;&gt; a;
std::cin.ignore(32767, '\n'); // удаляем до 32767 символов
// из входного буфера вплоть до появления символа '\n'

std::cin.ignore(std::cin.rdbuf()->in_avail());
// зачищаем только то, что использовано
</pre>

  <h4>Ошибка 3: Извлечение не выполняется</h4>
<pre>
while (true) // пока пользователь не введет корректное значение1
{
  std::cout &lt;&lt; "Enter a double value: ";
  double a;
  std::cin &gt;&gt; a;

  if (std::cin.fail()) // если предыдущее значение оказалось неудачным
  {
    std::cin.clear(); // возвращаем cin в обычный режим работы
    std::cin.ignore(32767, '\n'); // удаляем значения предыдущего ввода из входного буфера
  }
  else // если все хорошо, выходим используя break
  {
    std::cin.ignore(32767, '\n');
    break;
  }
}
</pre>

  <h4>Ошибка 4: Извлечение выполняется успешно, но пользователь ввел слишком большое числовое значение</h4>
<pre>
std::int16_t x{ 0 };
// переменная x занимает 16 бит
// ее диапазон от -32768 до 32767
std::cout &lt;&lt; "Enter number x between -32768 and 32767: ";
std::cin &gt;&gt; x;

std::int16_t y{ 0 };
// переменная y занимает 16 бит
// ее диапазон от -32768 до 32767
std::cout &lt;&lt; "Enter number y between -32768 and 32767: ";
std::cin &gt;&gt; y;

std::cout &lt;&lt; "The sum is: " &lt;&lt; x + y &lt;&lt; '\n';
</pre>
</article>


<!-- Задача 2 -->
<article class="article">
  <div class="anchor" id="task2"></div>
  <h3>Задача 2</h3>

  <p>Вычислить сумму числовой последовательности без использования возведения в степень</p>
  <code>1 + 1/3 + 1/(3<sup>2</sup>) + ... + 1/(3<sup>8</sup>)</code>

  <h4>Решение</h4>
<pre>
double sum {1};
double denominator {1};

for (int i = 0; i &lt; 8; i++)
{
  denominator *= 3;
  sum += 1 / denominator;
}

std::cout &lt;&lt; sum;
</pre>
</article>


<!-- Задача 3 -->
<article class="article">
  <div class="anchor" id="task3"></div>
  <h3>Задача 3</h3>

  <p>Вычислить сумму числовой последовательности без использования возведения в степень</p>
  <code>x + x<sup>3</sup>/3 + x<sup>5</sup>/5 + ... + x<sup>11</sup>/11</code>

  <h4>Решение</h4>
<pre>
double sum {};
int n {5};
double x {2.0};
double temp = x;

for (int i = 0; i &lt; n; i++)
{
  sum += temp;
  temp = temp * (2 * i - 1) * x * x / (2 * i + 1);
}

std::cout &lt;&lt; sum;
</pre>
</article>


<!-- Задача 4 -->
<article class="article">
  <div class="anchor" id="task4"></div>
  <h3>Задача 4</h3>

  <p>Вычислить сумму числовой последовательности без использования возведения в степень</p>
  <code>e<sup>x</sup> = 1 + x + x<sup>2</sup>/2! + x<sup>3</sup>/3! + x<sup>4</sup>/4! + ...</code>
  <code>cos x = 1 - x<sup>2</sup>/2! + x<sup>4</sup>/4! + x<sup>6</sup>/6! + ...</code>
  <code>sin x = x - x<sup>3</sup>/3! + x<sup>5</sup>/5! + x<sup>7</sup>/7! + ...</code>
</article>

