<article class="article">
  <a href="https://codeforces.com/contest/5" target="_blank">Codeforces 5 Round 5 Beta 2010-03-20</a>
</article>


<!-- Содержание -->
<article class="article">
  <h2>Содержание</h2>

      <a href="#task1">Задача A. Исходящий трафик чата</a>
  <br><a href="#task2">Задача B. Выравнивание по центру</a>
  <br><a href="#task3">Задача C. Наибольшая правильная скобочная подстрока</a>
  <br><a href="#task4">Задача D. Соблюдай правила</a>
  <br><a href="#task5">Задача E. Передача сигналов по-биндейски</a>
</article>


<!-- Задача A. Исходящий трафик чата -->
<article class="article">
  <div class="anchor" id="task1"></div>
  <h3>Задача A. Исходящий трафик чата</h3>

  <div><i>Ограничение по времени 1с
  <br>Ограничение по памяти 64мб</i></div>

  <p>Последнее время Поликарп много трудится над новым проектом "Поличат". Следуя современным тенденциям IT индустрии, Поликарп решил, что в этом проекте непременно должен быть чат. Проведя пару часов за компьютером, Поликарп написал чат-сервер, который может выполнять три типа команд:</p>
  <ul>
    <li>Добавить человека в чат (команда 'Добавить').</li>
    <li>Удалить человека из чата (команда 'Удалить').</li>
    <li>Отправить сообщение от кого-либо всем участникам чата, включая отправителя сообщения (команда 'Отправить').</li>
  </ul>

  <p>Сейчас Поликарп хочет узнать, какое количество исходящего трафика пошлет его сервер при обработке набора команд.</p>

  <p>Поликарп выяснил, что при обработке команды 'Добавить' или 'Удалить' сервер не посылает трафика вовсе, а при обработке команды 'Отправить' каждому из участников чата посылается l байт, где l — длина рассылаемого сообщения.</p>

  <p>Так как у Поликарпа совсем нет свободного времени, он просит вас помочь с решением этой задачи.</p>

  <h4>Входные данные</h4>
  <p>Входной файл будет содержать не более 100 команд. Каждая команда будет располагаться на своей строке и иметь длину не более 100 символов. Форматы команд будут следующими:</p>
  <ul>
    <li>+имя для команды 'Добавить'.</li>
    <li>-имя для команды 'Удалить'.</li>
    <li>имя_отправителя:текст_сообщения для команды 'Отправить'.</li>
  </ul>

  <p>имя и имя_отправителя — непустая последовательность латинских букв или цифр. текст_сообщения может содержать латинские буквы, цифры и пробелы, но не может начинаться или оканчиваться пробелом. текст_сообщения может быть пустой строкой.</p>

  <p>Гарантируется, что входные данные корректны, то есть человек не будет добавлен в чат, если он там уже присутствует, не будет команды 'Удалить', если человека с таким именем нет в чате и тому подобное.</p>

  <p>Имена, различающиеся исключительно регистром букв следует считать различными.</p>

  <h4>Выходные данные</h4>
  <p>Выведите единственное число — ответ на задачу.</p>

  <details>
    <summary>Примеры</summary>
    <h4>Пример 1</h4>
<pre>
+Mike
Mike:hello
+Kate
+Dmitry
-Dmitry
Kate:hi
-Kate
</pre>
    <code>9</code>

    <h4>Пример 2</h4>
<pre>
+Mike
-Mike
+Mike
Mike:Hi   I am here
-Mike
+Kate
-Kate
</pre>
    <code>14</code>
  </details>

  <details>
    <summary>Решение</summary>
<pre>
#include &lt;iostream&gt;
#include &lt;string&gt;

using namespace std;

int main() {
  int cnt_names = 0;
  int cnt_bytes = 0;
  string in;

  while (getline(cin, in)) {
    if (in[0] == '+') {

      // команда "добавить"
      cnt_names++;
    } else if (in[0] == '-') {

    // команда "удалить"
      cnt_names--;
    } else {

      // команда "отправить"
      string mes = in.substr(in.find(":"));
      cnt_bytes += cnt_names * (mes.size() - 1);
    }
  }

  cout &lt;&lt; cnt_bytes;
}
</pre>
  </details>
</article>


<!-- Задача B. Выравнивание по центру -->
<article class="article">
  <div class="anchor" id="task2"></div>
  <h3>Задача B. Выравнивание по центру</h3>

  <div><i>Ограничение по времени 1с
  <br>Ограничение по памяти 64мб</i></div>

  <p>Почти каждый текстовый редактор имеет встроенную функцию выравнивание по центру заданного текста. К выпуску четвертого релиза популярного в Берляндии редактора «Textpad» разработчики решили включить данную функциональность и в этот продукт.</p>

  <p>Вам положено в кратчайший срок реализовать выравнивание. Удачи!</p>

  <h4>Входные данные</h4>
  <p>Входной файл состоит из одной или более строк, каждая из которых содержит буквы латинского алфавита, цифры и/или пробелы. Строки не могут начинаться или заканчиваться пробелами. Гарантируется, что хотя бы одна из заданных строк имеет положительную длину. Длина каждой строки и их количество не превосходит 1000.</p>

  <h4>Выходные данные</h4>
  <p>Отформатируйте заданный текст, выравняв его по центру. Окружите весь текст рамкой из символов «*» минимального размера. Если строка не может быть однозначно выравнена (например строка имеет четную длину при нечетной ширине всего блока), то такие строки надо размещать, попеременно округляя позицию к левому и правому краю (начинайте с округления в левую сторону). Внимательно изучите примеры для уточнения правил вывода ответа.</p>

  <details>
    <summary>Примеры</summary>
    <h4>Пример 1</h4>
<pre>
This  is

Codeforces
Beta
Round
5
</pre>
<pre>
************
* This  is *
*          *
*Codeforces*
*   Beta   *
*  Round   *
*     5    *
************
</pre>

    <h4>Пример 2</h4>
<pre>
welcome to the
Codeforces
Beta
Round 5

and
good luck
</pre>
<pre>
****************
*welcome to the*
*  Codeforces  *
*     Beta     *
*   Round 5    *
*              *
*      and     *
*  good luck   *
****************
</pre>
  </details>
</article>


<!-- Задача C. Наибольшая правильная скобочная подстрока -->
<article class="article">
  <div class="anchor" id="task3"></div>
  <h3>Задача C. Наибольшая правильная скобочная подстрока</h3>

  <div><i>Ограничение по времени 2с
  <br>Ограничение по памяти 256мб</i></div>

  <p>И снова вам предлагается задача на правильные скобочные последовательности.</p>

  <p>Напомним, что скобочная последовательность называется правильной, если путем вставки в нее символов «+» и «1» можно получить из нее корректное математическое выражение. Например, последовательности «(())()», «()» и «(()(()))» — правильные, в то время как «)(», «(()» и «(()))(» — нет.</p>

  <p>Вам задана строка, состоящая из символов «(» и «)». Ваша задача найти её наидлиннейшую подстроку, которая является правильной скобочной последовательностью. Также вам надо найти количество таких подстрок.</p>

  <h4>Входные данные</h4>
  <p>В первой строке входного файла записана непустая строка, состоящая из символов «(» и «)». Её длина не превосходит 10⁶.</p>

  <h4>Выходные данные</h4>
  <p>Выведите длину наибольшей подстроки, являющейся правильной скобочной последовательностью, и количество таких подстрок. Если искомых подстрок не существует, то выведите «0 1» в единственную строку выходных данных.</p>

  <details>
    <summary>Примеры</summary>
    <h4>Пример 1</h4>
    <code>)((())))(()())</code>
    <code>6 2</code>

    <h4>Пример 2</h4>
    <code>))(</code>
    <code>0 1</code>
  </details>
</article>


<!-- Задача D. Соблюдай правила -->
<article class="article">
  <div class="anchor" id="task4"></div>
  <h3>Задача D. Соблюдай правила</h3>

  <div><i>Ограничение по времени 1с
  <br>Ограничение по памяти 64мб</i></div>

  <p>Все знают, что столица Берляндии соединена с Беркувером (столицей Олимпиады) прямой дорогой. Для того, чтобы дорога обладала наибольшей пропускной способностью на ней был установлен всего один знак, ограничивающий максимальную скорость. Знаки в Берляндии особенные - они ограничивают скорость движения лишь в той точке, в которой они установлены. Сразу после проезда знака движение разрешено с любой скоростью.</p>

  <p>Известно, что автомобиль среднестатистического берляндца разгоняется (или тормозит) с ускорением a км/ч² и развивает максимальную скорость v км/ч. Дорога имеет длину l км и на расстоянии d км (1 ≤ d &lt; l) от столицы Берляндии расположен знак, ограничивающий максимальную скорость до w км/ч. В начале поездки автомобиль имеет нулевую скорость. Определите минимальное время, за которое среднестатистический берляндец доедет из столицы в Беркувер, если будет двигаться оптимальным образом.</p>

  <p>Автомобиль может финишировать в Беркувере с любой скоростью.</p>

  <h4>Входные данные</h4>
  <p>В первой строке входного файла содержатся два целых числа a и v (1 ≤ a, v ≤ 10000). Вторая строка содержит три целых числа l, d и w (2 ≤ l ≤ 10000; 1 ≤ d &lt; l; 1 ≤ w ≤ 10000).</p>

  <h4>Выходные данные</h4>
  <p>Выведите ответ не менее, чем с пятью знаками после десятичной точки.</p>

  <details>
    <summary>Примеры</summary>
    <h4>Пример 1</h4>
<pre>
1 1
2 1 3
</pre>
    <code>2.500000000000</code>

    <h4>Пример 2</h4>
<pre>
5 70
200 170 40
</pre>
    <code>8.965874696353</code>
  </details>
</article>


<!-- Задача E. Передача сигналов по-биндейски -->
<article class="article">
  <div class="anchor" id="task5"></div>
  <h3>Задача E. Передача сигналов по-биндейски</h3>

  <div><i>Ограничение по времени 4с
  <br>Ограничение по памяти 256мб</i></div>

  <p>Всем известно, что давным-давно на территории современной Берляндии жили племена биндейцев. Их столица была окружена n холмами, расположенными по окружности. На каждом из холмов сидело по постовому, наблюдающему за окрестностями день и ночь.</p>

  <p>В случае какой-либо опасности постовой мог разжечь на холме костер. Один постовой видел сигнал другого, если на цепочке, их соединяющей, не было холма выше холма любого из них. Так как для любых двух холмов существует две соединяющие их цепочки, то такое условие должно было выполниться хотя бы на одной из них, чтобы сигнал был замечен. Например, для любых двух соседних постовых верно, что сигнал одного из них будет замечен другим.</p>

  <p>Важной характеристикой данной схемы наблюдения было количество таких пар постовых, что они могут видеть сигналы друг друга. Ваша задача по заданным высотам холмов найти это количество.</p>

  <h4>Входные данные</h4>
  <p>В первой строке входных данных записано целое число n (3 ≤ n ≤ 10⁶), n — количество холмов вокруг столицы. Вторая строка содержит n чисел — высоты холмов в порядке по часовой стрелке. Все высоты — целые числа от 1 до 10⁹.</p>

  <h4>Выходные данные</h4>
  <p>Выведите искомое количество пар.</p>

  <details>
    <summary>Пример</summary>
<pre>
5
1 2 4 5 3
</pre>
    <code>7</code>
  </details>
</article>

