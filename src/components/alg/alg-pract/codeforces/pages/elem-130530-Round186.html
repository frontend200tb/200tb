<article class="article">
  <a href="https://codeforces.com/contest/313" target="_blank">Codeforces Round 186 (Div. 2) 2013-05-30</a>
</article>


<!-- Содержание -->
<article class="article">
  <h2>Содержание</h2>

      <a href="#task1">Задача A. Илья и банковский счет</a>
  <br><a href="#task2">Задача B. Илья и запросы</a>
  <br><a href="#task3">Задача C. Илья и матрица</a>
  <br><a href="#task4">Задача D. Илья и дороги</a>
  <br><a href="#task5">Задача E. Илья и два числа</a>
</article>


<!-- Задача A. Илья и банковский счет -->
<article class="article">
  <div class="anchor" id="task1"></div>
  <h3>Задача A. Илья и банковский счет</h3>

  <div><i>Ограничение по времени 2с
  <br>Ограничение по памяти 256мб</i></div>

  <p>Илья — очень умный лев, который живет в необычном городе ZooVille. В этом городе у всех зверей есть свои права и обязательства. Более того, у них даже есть свой банковский счет. Состояние банковского счета — это целое число. Состояние банковского счета может быть отрицательным числом. Это значит, что владелец счета должен банку.</p>

  <p>У льва Ильи скоро день рождения, поэтому ему подарили много подарков. Один из них (подарок главного банка ZooVille) — это возможность не более одного раза удалить последнюю или предпоследнюю цифру состояния его банковского счета. Например, если состояние банковского счета Ильи равно -123, то Илья может удалить последнюю его цифру и получить состояние счета равное -12, также он может удалить предпоследнюю его цифру и получить состояние счета равное -13. Конечно, Илье разрешается не пользоваться возможностью удалить цифру из счета.</p>

  <p>Илья не очень силен в математике и именно поэтому он просит Вас помочь максимизировать свой банковский счет. Найдите, какое максимальное состояние банковского счета можно получить, используя подарок банка.</p>

  <h4>Входные данные</h4>
  <p>В единственной строке задано целое число n (10 ≤ |n| ≤ 10⁹) — состояние счета Ильи.</p>

  <h4>Выходные данные</h4>
  <p>В единственной строке выведите целое число — максимальное состояние банковского счета, которое может получить Илья.</p>

  <details>
    <summary>Примеры</summary>
    <h4>Пример 1</h4>
    <code>2230</code>
    <code>2230</code>

    <h4>Пример 2</h4>
    <code>-10</code>
    <code>0</code>

    <h4>Пример 3</h4>
    <code>-100003</code>
    <code>-10000</code>

    <p>В первом тестовом примере Илье не выгодно использовать подарок.</p>
    <p>Во втором тестовом примере можно удалить цифру 1 и получить состояние счета равное 0.</p>
  </details>

  <details>
    <summary>Решение</summary>
<pre>
#include &lt;iostream&gt;

using namespace std;

int main() {
  // ввод данных
  int n;
  cin >> n;

  // решение
  int res = n;
  if (n &lt; 0) {
    int n1 = n % 10;
    int res1 = n / 10;
    int res2 = n / 100 * 10 + n1;
    res = max(res1, res2);
  }

  // вывод результата
  cout &lt;&lt; res;
}
</pre>
  </details>
</article>


<!-- Задача B. Илья и запросы -->
<article class="article">
  <div class="anchor" id="task2"></div>
  <h3>Задача B. Илья и запросы</h3>

  <div><i>Ограничение по времени 2с
  <br>Ограничение по памяти 256мб</i></div>

  <p>Лев Илья хочет помочь всем своим друзьям со сдачей экзаменов. Чтобы сдать экзамен по информатике нужно решить следующую задачу.</p>

  <p>Даны строка s = s<sub>1</sub>s<sub>2</sub>... s<sub>n</sub> (n — длина строки), состоящая только из символов «.» и «#», и m запросов. Каждый запрос описывается парой целых чисел l<sub>i</sub>, r<sub>i</sub> (1 ≤ l<sub>i</sub> &lt; r<sub>i</sub> ≤ n). Ответ на запрос l<sub>i</sub>, r<sub>i</sub> — это количество таких целых чисел i (l<sub>i</sub> ≤ i &lt; r<sub>i</sub>), что s<sub>i</sub>= s<sub>i+1</sub>.</p>

  <p>Лев Илья хочет помочь друзьям, но кто же поможет ему. Помогите Льву Илье, решите задачу.</p>

  <h4>Входные данные</h4>
  <p>В первой строке записана строка s длины n (2 ≤ n ≤ 10<sup>5</sup>). Гарантируется, что заданная строка состоит только из символов «.» и «#».</p>

  <p>В следующей строке записано целое число m (1 ≤ m ≤ 10<sup>5</sup>) — количество запросов. В каждой из следующих m строк записано описание соответствующего запроса. В i-той строке записаны целые числа l<sub>i</sub>, r<sub>i</sub> (1 ≤ l<sub>i</sub> &lt; r<sub>i</sub> ≤ n).</p>

  <h4>Выходные данные</h4>
  <p>Выведите m целых чисел — ответы на запросы в том порядке, в котором запросы заданы во входных данных.</p>

  <details>
    <summary>Примеры</summary>
  <h4>Пример 1</h4>
<pre>
......
4
3 4
2 3
1 6
2 6
</pre>
<pre>
1
1
5
4
</pre>

  <h4>Пример 2</h4>
<pre>
#..###
5
1 3
5 6
1 5
3 6
3 4
</pre>
<pre>
1
1
2
2
0
</pre>
  </details>

  <details>
    <summary>Наивное решение - цикл в цикле</summary>
<pre>
#include &lt;iostream&gt;

using namespace std;

int main() {
  // ввод данных
  string s;
  cin >> s;
  int m;
  cin >> m;
  int l, r;
  for (int i = 0; i &lt; m; i++) {
    cin >> l >> r;

    // решение
    l--;
    r--;
    int result = 0;
    for (int j = l; j &lt; r; j++) {
      if (s[j] == s[j + 1]) {
        result++;
      }
    }

    // вывод результата
    cout &lt;&lt; result &lt;&lt; "\n";
  }
}
</pre>
  </details>

  <details>
    <summary>Решение - префикс-функция</summary>
<pre>
#include &lt;iostream&gt;
#include &lt;vector&gt;

using namespace std;

int main() {
  // ввод данных
  string s;
  cin >> s;

  // создадим префикс-функцию
  vector&lt;int&gt; Pref(s.size());
  for (int i = 1; i &lt; s.size(); i++) {
    Pref[i] = Pref[i - 1];
    if (s[i] == s[i - 1]) {
      Pref[i]++;
    }
  }

  int m;
  cin >> m;
  int l, r;
  for (int i = 0; i &lt; m; i++) {
    cin >> l >> r;

    // решение и вывод результата
    l--;
    r--;
    cout &lt;&lt; Pref[r] - Pref[l] &lt;&lt; "\n";
  }
}
</pre>
  </details>
</article>


<!-- Задача C. Илья и матрица -->
<article class="article">
  <div class="anchor" id="task3"></div>
  <h3>Задача C. Илья и матрица</h3>

  <div><i>Ограничение по времени 1с
  <br>Ограничение по памяти 256мб</i></div>

  <p>Илья — очень добрый лев, который любит математику. Из всех математических объектов Илья больше всего любит матрицы. Сейчас перед ним стоит непростая задача о матрицах, которую нужно решить.</p>

  <p>Заданы квадратная матрица размера 2ⁿ x 2ⁿ и 4ⁿ целых чисел. Нужно разместить все эти числа в матрице (каждое число поместить в отдельную ячейку) так, чтобы красота полученной матрицы с числами была максимальна.</p>

  <p>Красотой матрицы размера 2ⁿ x 2ⁿ называется целое число, получаемое по следующему алгоритму:</p>
  <ul>
    <li>Найти максимальный элемент в матрице. Обозначим его за m.</li>
    <li>Если n = 0, тогда красота матрицы равна m. Иначе, матрицу можно разбить на 4 непересекающиеся подматрицы размера 2<sup>n - 1</sup> x 2<sup>n - 1</sup>, тогда красота матрицы равна сумме числа m и четырех красот описанных подматриц.</li>
  </ul>

  <p>Как можно заметить, этот алгоритм — рекурсивный.</p>

  <p>Помогите Илье, решите задачу и выведите результирующую максимальную красоту матрицы.</p>

  <h4>Входные данные</h4>
  <p>В первой строке записано целое число 4ⁿ (1 ≤ 4ⁿ ≤ 2·10⁶). В следующей строке находится 4ⁿ целых чисел aᵢ (1 ≤ aᵢ ≤ 10⁹) — числа, которые нужно разместить в матрице размера 2ⁿ x 2ⁿ.</p>

  <h4>Выходные данные</h4>
  <p>В единственную строку выведите максимальное значение красоты полученной матрицы.</p>

  <p>Пожалуйста, не используйте спецификатор %lld для чтения или записи 64-х битовых чисел на С++. Рекомендуется использовать потоки cin, cout или спецификатор %I64d.</p>

  <details>
    <summary>Примеры</summary>
  <h4>Пример 1</h4>
<pre>
1
13
</pre>
  <code>13</code>

  <h4>Пример 2</h4>
<pre>
4
1 2 3 4
</pre>
  <code>14</code>

  <p>Рассмотрим второй пример, числа в матрице надо расставить следующим способом:</p>
<pre>
1 2
3 4
</pre>
  <p>Тогда красота матрицы будет равна: 4 + 1 + 2 + 3 + 4 = 14.</p>
  </details>
</article>


<!-- Задача D. Илья и дороги -->
<article class="article">
  <div class="anchor" id="task4"></div>
  <h3>Задача D. Илья и дороги</h3>

  <div><i>Ограничение по времени 3с
  <br>Ограничение по памяти 256мб</i></div>

  <p>В городе Ильи все хорошо, кроме дорог, потому что единственная дорога в городе ZooVille представляет собой n ям, расположенных в ряд. Будем считать, что ямы пронумерованы от 1 до n слева направо.</p>

  <p>Илья очень хочет помочь своему городу, для этого он хочет отремонтировать хотя бы k ям (хотя можно и больше) на единственной дороге ZooVille.</p>

  <p>В городе есть m строительных компаний, i-ая компания может за ci денежных единиц отремонтировать отрезок дороги, на котором находятся ямы с номерами не меньше lᵢ и не больше rᵢ. Компании в городе ZooVille очень меркантильные, поэтому, если какая-то яма на ремонтируемом отрезке дороги уже отремонтирована, то стоимость ремонта отрезка дороги не уменьшается.</p>

  <p>Определите, какое минимальное количество денег потребуется Илье, чтобы отремонтировать хотя бы k ям.</p>

  <h4>Входные данные</h4>
  <p>В первой строке записаны три целых числа n, m, k (1 ≤ n ≤ 300, 1 ≤ m ≤ 10⁵, 1 ≤ k ≤ n). В следующих m строках записано описание компаний. В i-той строке записаны три целых числа lᵢ, rᵢ, cᵢ (1 ≤ lᵢ ≤ rᵢ ≤ n, 1 ≤ cᵢ ≤ 10⁹).</p>

  <h4>Выходные данные</h4>
  <p>Выведите единственное целое число — минимальное количество денег, которое потребуется Илье, чтобы отремонтировать хотя бы k ям.</p>

  <p>Если отремонтировать хотя бы k ям невозможно, выведите -1.</p>

  <p>Пожалуйста, не используйте спецификатор %lld для чтения или записи 64-х битовых чисел на С++. Рекомендуется использовать потоки cin, cout или спецификатор %I64d.</p>

  <details>
    <summary>Примеры</summary>
  <h4>Пример 1</h4>
<pre>
10 4 6
7 9 11
6 9 13
7 7 7
3 5 6
</pre>
  <code>17</code>

  <h4>Пример 2</h4>
<pre>
10 7 1
3 4 15
8 9 8
5 6 8
9 10 6
1 4 2
1 4 10
8 10 13
</pre>
  <code>2</code>

  <h4>Пример 3</h4>
<pre>
10 1 9
5 10 14
</pre>
  <code>-1</code>
  </details>
</article>


<!-- Задача E. Илья и два числа -->
<article class="article">
  <div class="anchor" id="task5"></div>
  <h3>Задача E. Илья и два числа</h3>

  <div><i>Ограничение по времени 2с
  <br>Ограничение по памяти 256мб</i></div>

  <p>Илья в последнее время начал увлекаться археологией. Недавно он нашел два числа, записанных в системе счисления по основанию m. Каждое из найденных чисел состояло ровно из n цифр. Илья сразу начал искать информацию об этих числах, он узнал, что числа — это часть шифра, а тот, кто разгадает шифр, обретет невиданное сокровище.</p>

  <p>После длительных исследований Илья понял: чтобы разгадать шифр, нужно сделать следующее:</p>
  <ul>
    <li>Переставить цифры в первом числе некоторым образом, аналогично, переставить цифры во втором числе некоторым образом. В результате этой операции у чисел могут появиться лидирующие нули.</li>
    <li>Поцифренно сложить числа по модулю m. Другими словами, нужно получить третье число, длины n, каждая цифра которого, есть сумма соответствующих цифр найденных чисел. Например, пусть есть два числа, записанных в троичной системе счисления, 001210 и 012111, тогда, если их сложить поцифренно по модулю 3, получится число 010021.</li>
    <li>Ключ к шифру — это максимально возможное число, которое можно получить на предыдущем шаге.</li>
  </ul>

  <p>Помогите Илье, найдите ключ к шифру.</p>

  <h4>Входные данные</h4>
  <p>В первой строке записано два целых числа n, m (1 ≤ n, m ≤ 10⁵, m > 1). Во второй строке записано первое найденное число, в третьей строке записано второе найденное число.</p>

  <p>Числа записываются как последовательность цифр в системе счисления по основанию m. Каждая цифра — это целое число от 0 до m - 1. Цифры в строке записаны в порядке от старших разрядов к младшим.</p>

  <p>Заданные числа могут содержать лидирующие нули.</p>

  <h4>Выходные данные</h4>
  <p>Выведите n цифр в системе счисления по основанию m — полученное третье число. Цифры выводите в порядке от старших разрядов к младшим.</p>

  <details>
    <summary>Примеры</summary>
  <h4>Пример 1</h4>
<pre>
4 7
5 4 3 2
5 6 5 4
</pre>
  <code>6 4 2 1</code>

  <h4>Пример 2</h4>
<pre>
5 5
2 4 4 1 3
1 0 1 2 4
</pre>
  <code>4 4 4 3 2</code>
  </details>
</article>

