<article class="article">
  <h1>2023 Павел Довгалюк - Динамическое программирование и все-все-все. 200c</h1>
  <p>Конспект книги</p>
</article>


<!-- Содержание -->
<article class="article">
  <h2>Содержание</h2>

      <a href="#p1.1">1 Рекуррентные соотношения (9)</a>
  <br><a href="#p1.1">1.1 Ханойская башня (9)</a>
  <br><a href="#p1.2">1.2 Как решать задачи с рекуррентностями (13)</a>
  <br><a href="#p1.3">1.3 Задача о разрезании пиццы (13)</a>
  <br><a href="#p1.4">1.4 Задача Иосифа Флавия (16)</a>
  <br><a href="#p1.5">1.5 Лягушка и шестиугольник (18)</a>
  <br><a href="#p2">2 Вычисление рекуррентностей на компьютере (29)</a>
  <br><a href="#p3">3 Динамическое программирование (49)</a>
  <br><a href="#p4">4 Динамическое программирование и одно целое число (53)</a>
  <br><a href="#p5">5 Динамическое программирование и два целых числа (67)</a>
  <br><a href="#p6">6 Динамическое программирование и одномерные массивы (79)</a>
  <br><a href="#p7">7 Динамическое программирование и последовательности (93)</a>
  <br><a href="#p8">8 Динамическое программирование и подмножества (105)</a>
  <br><a href="#p9">9 Динамическое программирование и матрицы (119)</a>
  <br><a href="#p10">10 Динамическое программирование по профилю (125)</a>
  <br><a href="#p11">11 Динамическое программирование и игры с полной информацией (139)</a>
  <br><a href="#p12">12 Динамическое программирование и все-все-все (163)</a>
</article>


<!-- 1 Рекуррентные соотношения (9) -->
<!-- 1.1 Ханойская башня (9) -->
<article class="article">
  <div class="anchor" id="p1.1"></div>
  <h2>1 Рекуррентные соотношения (9)</h2>
  <h3>1.1 Ханойская башня (9)</h3>

  <p><a href="#han0">0 дисков</a></p>
  <p><a href="#han1">1 диск</a></p>
  <p><a href="#han2">2 диска</a></p>
  <p><a href="#han3">3 диска</a></p>
  <p><a href="#han4">4 диска</a></p>
  <p><a href="#hann">n дисков</a></p>
  <p><a href="#hanr">Рекуррентное соотношение</a></p>
  <p><a href="#hanz">Замкнутое выражение</a></p>
  <p><a href="#hanh">Как решать задачи с рекуррентностями</a></p>

  <p>Ханойская башня - головоломка родом из XIX века. Это несколько дисков, нанизанных в порядке уменьшения размеров на один из трех колышков. Пронумеруем диски, начиная от самого маленького (верхнего).</p>
<pre>
      |                 |                 |
     *1*                |                 |
    **2**               |                 |
   ***3***              |                 |
  ****4****             |                 |
 *****5*****            |                 |
-------------     -------------     -------------
</pre>
  <p>Почти как детская пирамидка с кольцами.</p>

  <h4>Задача</h4>
  <p>Определить <strong>минимальное</strong> количество шагов для перемещения башни на свободный колышек.</p>

  <h4>Правила</h4>
  <ol>
    <li>За один ход можно перенести только один диск</li>
    <li>Нельзя класть больший диск на меньший</li>
  </ol>

  <p>Посчитаем число шагов для небольшого количества дисков, чтобы определить закономерность. Будем записывать ответы в виде последовательности чисел</p>
  <code>T<sub>0</sub>, T<sub>1</sub>, T<sub>2</sub>, ... , T<sub>n-1</sub>, T<sub>n</sub></code>
  <p>T<sub>0</sub> - минимальное количество шагов при 0 дисков</p>
  <p>T<sub>1</sub> - минимальное количество шагов при 1 диске</p>
  <p>T<sub>2</sub> - минимальное количество шагов при 2 дисках</p>
  <p>T<sub>n-1</sub> - минимальное количество шагов при n-1 дисках</p>
  <p>T<sub>n</sub> - минимальное количество шагов при n дисках</p>
</article>


<!-- 0 дисков -->
<article class="article">
  <div class="anchor" id="han0"></div>
  <h3>0 дисков</h3>

  <p>Отдельный крайний случай - когда нет дисков. Для перемещения башни без дисков вообще ни одного шага делать не нужно</p>
  <code>n = 0</code>
  <code>T<sub>0</sub> = 0</code>
</article>


<!-- 1 диск -->
<article class="article">
  <div class="anchor" id="han1"></div>
  <h3>1 диск</h3>

<pre>
  |      |      |
 *1*     |      |
-----  -----  -----
</pre>
  <p>Начнем с маленькой пирамиды в один диск высотой. Чтобы его переместить потребуется 1 шаг - взять диск и положить его на другой колышек</p>

  <h4>1-й шаг</h4>
<pre>
  |      |      |
  |     *1*     |
-----  -----  -----
</pre>
  <p>Для случая с одним диском n = 1, требуется 1 шаг</p>
  <code>n = 1</code>
  <code>T<sub>1</sub> = 1</code>
</article>


<!-- 2 диска -->
<article class="article">
  <div class="anchor" id="han2"></div>
  <h3>2 диска</h3>

<pre>
   |        |        |
  *1*       |        |
 **2**      |        |
-------  -------  -------
</pre>
  <p>Попробуем теперь переместить два диска</p>

  <h4>1-й шаг</h4>
<pre>
   |        |         |
   |        |         |
 **2**     *1*        |
-------  --------  -------
</pre>

<h4>2-й шаг</h4>
<pre>
   |        |        |
   |        |        |
   |       *1*     **2**
-------  -------  -------
</pre>

<h4>3-й шаг</h4>
<pre>
   |        |        |
   |        |       *1*
   |        |      **2**
-------  -------  -------
</pre>
  <p>Для перемещения двух дисков, мы сначала перенесли один диск. То есть на первом шаге мы решили задачу для предыдущего случая с перемещением одного диска. Значит и число шагов для предыдущего случая уже известно - 1 шаг. Потом перенесли второй диск. Это еще один шаг. И наконец, опять перенесли один диск, как из предыдущего случая. Всего три шага</p>
  <p>n = 2</p>
  <p>T<sub>n</sub> = T<sub>n-1</sub> + 1 + T<sub>n-1</sub></p>
  <p>T<sub>2</sub> = T<sub>1</sub> + 1 + T<sub>1</sub></p>
  <p>T<sub>2</sub> = 1 + 1 + 1</p>
  <code>n = 2</code>
  <code>T<sub>2</sub> = 3</code>
</article>


<!-- 3 диска -->
<article class="article">
  <div class="anchor" id="han3"></div>
  <h3>3 диска</h3>

<pre>
    |          |          |
   *1*         |          |
  **2**        |          |
 ***3***       |          |
---------  ---------  ---------
</pre>
  <p>Применим ту же закономерность и для случая с тремя дисками. Сначала перенесем два диска, как в предыдущем случае. На это нужно 3 шага. Потом перенесем третий диск - 1 шаг. И наконец, опять перенесем два диска, как из предыдущего случая. Всего 3 + 1 + 3 = 7 шагов</p>

  <h4>3-й шаг</h4>
<pre>
    |          |          |
    |          |          |
    |         *1*         |
 ***3***     **2**        |
---------  ---------  ---------
</pre>

  <h4>4-й шаг</h4>
<pre>
    |          |          |
    |          |          |
    |         *1*         |
    |        **2**     ***3***
---------  ---------  ---------
</pre>

  <h4>7-й шаг</h4>
<pre>
    |          |          |
    |          |         *1*
    |          |        **2**
    |          |       ***3***
---------  ---------  ---------
</pre>
  <p>n = 3</p>
  <p>T<sub>n</sub> = T<sub>n-1</sub> + 1 + T<sub>n-1</sub></p>
  <p>T<sub>3</sub> = T<sub>2</sub> + 1 + T<sub>2</sub></p>
  <p>T<sub>3</sub> = 3 + 1 + 3</p>
  <code>n = 3</code>
  <code>T<sub>3</sub> = 7</code>
</article>


<!-- 4 диска -->
<article class="article">
  <div class="anchor" id="han4"></div>
  <h3>4 диска</h3>

<pre>
     |            |            |
    *1*           |            |
   **2**          |            |
  ***3***         |            |
 ****4****        |            |
-----------  -----------  -----------
</pre>

  <h4>7-й шаг</h4>
<pre>
     |            |            |
     |            |            |
     |           *1*           |
     |          **2**          |
 ****4****     ***3***         |
-----------  -----------  -----------
</pre>

  <h4>8-й шаг</h4>
<pre>
     |            |            |
     |            |            |
     |           *1*           |
     |          **2**          |
     |         ***3***     ****4****
-----------  -----------  -----------
</pre>

  <h4>15-й шаг</h4>
<pre>
     |            |            |
     |            |           *1*
     |            |          **2**
     |            |         ***3***
     |            |        ****4****
-----------  -----------  -----------
</pre>
  <p>n = 4</p>
  <p>T<sub>n</sub> = T<sub>n-1</sub> + 1 + T<sub>n-1</sub></p>
  <p>T<sub>4</sub> = T<sub>3</sub> + 1 + T<sub>3</sub></p>
  <p>T<sub>4</sub> = 7 + 1 + 7</p>
  <code>n = 4</code>
  <code>T<sub>4</sub> = 15</code>
</article>


<!-- n дисков -->
<article class="article">
  <div class="anchor" id="hann"></div>
  <h3>n дисков</h3>

  <p>Для перемещения n дисков, нужно сначала переместить n-1 дисков на второй колышек. Затем переместить нижний самый большой диск на третий колышек. Затем переместить n-1 дисков на него. Причем самый большой диск не будет мешать любым перемещениям остальных дисков потому что на него можно ставить любой диск.</p>
  <p>Алгоритм перемещения n дисков</p>
  <ol>
    <li>Переместить n-1 дисков на второй колышек</li>
    <li>Переместить нижний самый большой диск на третий колышек</li>
    <li>Переместить n-1 дисков на самый большой диск на третьем колышке</li>
  </ol>
</article>


<!-- Рекуррентное соотношение -->
<article class="article">
  <div class="anchor" id="hanr"></div>
  <h3>Рекуррентное соотношение</h3>

  <p><strong>Рекуррентное соотношение</strong> - это система из двух равенств. Первое - это значение для нулевого элемента, а второе это зависимость значения для n элементов от значения для n-1 элементов</p>

  <p>T<sub>n</sub> это число шагов для перекладывания n дисков</p>
  <p>T<sub>n-1</sub> это число шагов для перекладывания n-1 дисков</p>
  <p>T<sub>n</sub> = T<sub>n-1</sub> + 1 + T<sub>n-1</sub></p>
  <p>T<sub>n</sub> = 2T<sub>n-1</sub> + 1</p>
  <p>T<sub>0</sub> это краевой случай для 0 дисков. T<sub>0</sub> = 0</p>

  <p>Напишем систему из двух равенств, которая называется <strong>рекуррентностью</strong></p>
  <code>T<sub>0</sub> = 0</code>
  <code>T<sub>n</sub> = 2T<sub>n-1</sub> + 1</code>
</article>


<!-- Замкнутое выражение -->
<article class="article">
  <div class="anchor" id="hanz"></div>
  <h3>Замкнутое выражение</h3>

  <p><strong>Замкнутое выражение</strong> - это решение рекуррентного соотношения, то есть запись T<sub>n</sub> в простой и компактной "замкнутой" форме. Такая запись позволяет вычислить T<sub>n</sub> быстро даже при большом n</p>
  <p>Прибавим 1 к обоим частям уравнения</p>
  <code>T<sub>0</sub> + 1 = 1</code>
  <code>T<sub>n</sub> + 1 = 2T<sub>n-1</sub> + 2</code>

  <p>Введем новую переменную U<sub>n</sub> = T<sub>n</sub> + 1, тогда получим</p>
  <code>U<sub>0</sub> = 1</code>
  <code>U<sub>n</sub> = 2T<sub>n-1</sub></code>

  <p>Очевидно, что</p>
  <code>U<sub>n</sub> = 2<sup>n</sup></code>

  <p>Тогда <strong>замкнутое выражение</strong> будет</p>
  <code>T<sub>n</sub> = 2<sup>n</sup> - 1</code>

  <p>Теперь можно посчитать число шагов для любого числа дисков. Посчитаем для пяти</p>
  <code>n = 5</code>
  <code>T<sub>5</sub> = 2<sup>5</sup> - 1 = 32 - 1 = 31</code>
</article>


<!-- 1.2 Как решать задачи с рекуррентностями (13) -->
<article class="article">
  <div class="anchor" id="p1.2"></div>
  <h3>1.2 Как решать задачи с рекуррентностями (13)</h3>

  <ol>
    <li>Рассмотреть крайние случаи. Они помогают вникнуть в задачу и проверить следующие этапы</li>
    <li>Посчитать вручную ответ для небольших n</li>
    <li>Найти математическое выражение для интересующей величины - рекуррентность, которая позволяет при заданном n вычислить результат. Чтобы найти такую рекуррентность, рассмотрите задачу для n-1 и выясните, что изменится при переходе к n</li>
    <li>Найти и доказать замкнутое выражение для рекуррентности</li>
  </ol>

  <p>Замкнутое выражение не всегда получается простым для вычисления. А иногда его еще и вовсе невозможно найти. Хорошо, что для написания программы в большинстве случаев замкнутые выражения не понядобятся. Как это работает узнаем в разделе "Вычисление рекуррентностей на компьютере"</p>
</article>


<!-- 1.3 Задача о разрезании пиццы (13) -->
<article class="article">
  <div class="anchor" id="p1.3"></div>
  <h3>1.3 Задача о разрезании пиццы (13)</h3>

  <p><a href="#piz0">0 разрезов</a></p>
  <p><a href="#piz1">1 разрез</a></p>
  <p><a href="#piz2">2 разреза</a></p>
  <p><a href="#piz3">3 разреза</a></p>
  <p><a href="#piz4">4 разреза</a></p>
  <p><a href="#pizn">n разрезов</a></p>
  <p><a href="#pizr">Рекуррентное соотношение</a></p>
  <p><a href="#pizz">Замкнутое выражение</a></p>

  <p>Сколько кусков пиццы можно получить, делая n прямолинейных разрезов ножом? Или же, если мы сумели приготовить пиццу бесконечно большого размера, каково максимальное число L<sub>n</sub> областей, на которые плоскость делится n прямыми?</p>

  <h4>Задача</h4>
  <p>Определить <strong>максимальное</strong> количество областей, которые получатся после разрезании</p>

  <h4>Правила</h4>
  <ol>
    <li>Пицца имеет бесконечно большой диаметр</li>
    <li>Разрез - это прямая линия</li>
  </ol>
  <p>Рассмотрим крайние случаи.</p>
</article>


<!-- 0 разрезов -->
<article class="article">
  <div class="anchor" id="piz0"></div>
  <h3>0 разрезов</h3>

<pre>
      *****
   *         *
 *             *
*               *
*               *
 *             *
   *         *
      *****
</pre>
  <p>Плоскость без прямых - это одна область</p>
  <code>n = 0</code>
  <code>L<sub>0</sub> = 1</code>
</article>


<!-- 1 разрез -->
<article class="article">
  <div class="anchor" id="piz1"></div>
  <h3>1 разрез</h3>

<pre>
      *****
   *         *
 *             *
*_______________*
*               *
 *             *
   *         *
      *****
</pre>

  <p>Один разрез - две области. Одна прямая пересекла одну область и разрезала ее на две</p>
  <p><strong>Первый</strong> разрез делит <strong>одну</strong> область, увеличивая количество областей еще на <strong>одну</strong></p>
  <p>n = 1</p>
  <p>L<sub>1</sub> = L<sub>0</sub> + 1</p>
  <p>L<sub>1</sub> = 1 + 1</p>
  <code>n = 1</code>
  <code>L<sub>1</sub> = 2</code>
</article>


<!-- 2 разреза -->
<article class="article">
  <div class="anchor" id="piz2"></div>
  <h3>2 разреза</h3>

<pre>
      *****
   *    |    *
 *      |      *
*_______|_______*
*       |       *
 *      |      *
   *    |    *
      *****
</pre>

  <p>Здесь возможны два случая</p>
  <ol>
    <li>Второй разрез не пересечет первую прямую, тогда получится три области</li>
    <li>Второй разрез пересечет первую прямую в одной точке, тогда получится четыре области</li>
  </ol>
  <p>Мы выбираем второй случай, потому что ищем <strong>максимальное</strong> количество областей</p>
  <p>Два разреза пересекутся в одной точке и поделят пиццу на четыре области</p>

  <p><strong>Второй</strong> разрез пересекает <strong>один</strong> предыдущий разрез и делит <strong>две</strong> области, увеличивая количество областей еще на <strong>две</strong></p>
  <p>n = 2</p>
  <p>L<sub>2</sub> = L<sub>1</sub> + 2</p>
  <p>L<sub>2</sub> = 2 + 2</p>
  <code>n = 2</code>
  <code>L<sub>2</sub> = 4</code>

</article>


<!-- 3 разреза -->
<article class="article">
  <div class="anchor" id="piz3"></div>
  <h3>3 разреза</h3>

<pre>
          *****
       *  \ |    *
    *      \|       *
  *         \         *
 *          |\         *
*___________|_\_________*
*           |  \        *
 *          |   \      *
  *         |    \    *
    *       |     \ *
       *    |    *
          *****
</pre>

  <p>Здесь возможны три случая</p>
  <ol>
    <li>Третий разрез может пройти через точку пересечения первых двух разрезов и тогда получится 6 областей</li>
    <li>Третий разрез может пересечь только одну прямую и тогда также получится 6 областей</li>
    <li>Третий разрез пересекает 2 прямые и получается 7 областей</li>
  </ol>
  <p>Мы выбираем третий случай, потому что ищем <strong>максимальное</strong> количество областей</p>

  <p><strong>Третий</strong> разрез пересекает <strong>два</strong> предыдущих разреза и делит <strong>три</strong> области, увеличивая количество областей еще на три</p>
  <p>n = 3</p>
  <p>L<sub>3</sub> = L<sub>2</sub> + 3</p>
  <p>L<sub>3</sub> = 4 + 3</p>
  <code>n = 3</code>
  <code>L<sub>3</sub> = 7</code>
</article>


<!-- 4 разреза -->
<article class="article">
  <div class="anchor" id="piz4"></div>
  <h3>4 разреза</h3>

<pre>
          *********
        *  \  |     *
      *     \ |       *
    *        \|       / *
  *           \      /    *
 *            |\    /      *
*_____________|_\__/________*
*             |  \/         *
 *            |  /\        *
  *           | /  \      *
    *         |/    \   *
      *       /      \*
        *    /|     *
          *********
</pre>

  <p><strong>Четвертый</strong> разрез пересекает <strong>три</strong> предыдущих разреза и делит четыре области и увеличивая количество областей еще на четыре</p>
  <p>n = 4</p>
  <p>L<sub>4</sub> = L<sub>3</sub> + 4</p>
  <p>L<sub>4</sub> = 7 + 4</p>
  <code>n = 4</code>
  <code>L<sub>4</sub> = 11</code>
</article>


<!-- n разрезов -->
<article class="article">
  <div class="anchor" id="pizn"></div>
  <h3>n разрезов</h3>

  <p>Мы заметили, что каждая прямая, пересекая одну область, разрезает ее на две. Пересекая две области разрезает их на четыре. Пересекая три области разрезает их на шесть. Пересекая k областей разрезает их на 2k областей</p>
</article>


<!-- Рекуррентное соотношение -->
<article class="article">
  <div class="anchor" id="pizr"></div>
  <h3>Рекуррентное соотношение</h3>

  <p><strong>n-й </strong>разрез пересекает <strong>n-1</strong> предыдущих разрезов и делит <strong>n</strong> пересекаемых областей, увеличивая количество областей еще на <strong>n</strong></p>
  <p>L<sub>n</sub> = L<sub>n-1</sub> + n</p>

  <p>Искомое <strong>рекурентное соотношение</strong> имеет вид</p>
  <code>L<sub>0</sub> = 1</code>
  <code>L<sub>n</sub> = L<sub>n-1</sub> + n</code>
</article>


<!-- Замкнутое выражение -->
<article class="article">
  <div class="anchor" id="pizz"></div>
  <h3>Замкнутое выражение</h3>

  <p>В отличие от формулы для <strong>Ханойской башни</strong>, здесь трудно угадать, какая замкнутая формула подходит для вычисления L<sub>n</sub></p>
  <p>Развернем формулу из <strong>рекуррентного соотношения</strong>, подставляя в выражение ее саму</p>
  <code>L<sub>n</sub> = L<sub>n-1</sub> + n</code>
  <code>L<sub>n</sub> = L<sub>n-2</sub> + (n-1) + n</code>
  <code>L<sub>n</sub> = L<sub>n-3</sub> + (n-2) + (n-1) + n</code>
  <code>L<sub>n</sub> = L<sub>n-n</sub> + (n - (n-1)) + ... + (n-1) + n</code>
  <code>L<sub>n</sub> = L<sub>0</sub> + 1 + 2 + ... + (n-1) + n</code>
  <code>L<sub>n</sub> = 1 + S<sub>n</sub></code>
  <p>Где S<sub>n</sub> - сумма первых n натуральных чисел</p>
  <p>Чтобы сложить идущие подряд натуральные числа, воспользуемся <strong>методом Гаусса</strong>.</p>
  <p><strong>Метод Гаусса</strong> состоит в том чтобы складывать числа парами. Первое с последним, второе с предпоследним и т.д. Сумма каждой пары таких чисел равна n+1</p>
  <p>Сложим n чисел одной последовательности с n числами такой же последовательности</p>
  <code>2S<sub>n</sub> = S<sub>n</sub> + S<sub>n</sub></code>
  <code>2S<sub>n</sub> = (1 + 2 + ... + (n-1) + n) + (n + (n-1) + ... + 2 + 1)</code>
  <code>2S<sub>n</sub> = (n+1) + (n+1) + ... (n+1) + (n+1)</code>
  <code>2S<sub>n</sub> = n(n+1)</code>

  <p>Отсюда находим значение S<sub>n</sub></p>
  <code>S<sub>n</sub> = n * (n+1) / 2</code>

  <p>Тогда <strong>замкнутое выражение</strong> будет</p>
  <code>L<sub>n</sub> = (n * (n+1) / 2) + 1</code>

  <p>Теперь можно посчитать число кусочков пиццы для любого числа разрезов. Посчитаем для пяти</p>
  <code>n = 5</code>
  <code>L<sub>5</sub> = (5 * (5+1) / 2) + 1 = 15 + 1 = 16</code>
</article>


<!-- 1.4 Задача Иосифа Флавия (16) -->
<article class="article">
  <div class="anchor" id="p1.4"></div>
  <h3>1.4 Задача Иосифа Флавия (16)</h3>

  <p><a href="#flav">Задача Иосифа Флавия</a></p>
  <p><a href="#flav0">0 человек</a></p>
  <p><a href="#flav1">1 человек</a></p>
  <p><a href="#flav2">2 человека</a></p>
  <p><a href="#flav3">3 человека</a></p>
  <p><a href="#flav4">2n человек</a></p>
  <p><a href="#flav5">2n+1 человек</a></p>
  <p><a href="#flavr">Рекуррентное соотношение</a></p>

  <p>Задача Иосифа Флавия - это математическая задача с историческим подтекстом. Воины в отряде Иосифа Флавия, сражавшиеся против римлян, не захотели сдаваться в плен. Поэтому они решили встать в круг, чтобы каждые двое в круге убивали каждого третьего. А последние двое убьют друг друга. Иосиф Флавий решил, что это не очень хорошая идея, поэтому рассчитал, куда ему и его товарищу надо встать, чтобы остаться в живых</p>
  <p>Мы рассмотрим чуть отличающееся условие - n человек становятся по кругу и нумеруются числами от 1 до n. Затем из круга выходит каждый второй до тех пор, пока не останется только один человек. Например, если n = 10, то порядок выхода таков: 2,4,6,8,10,3,7,1,9, так что остается номер 5.</p>
  <p>Попробуем найти формулу (то есть рекуррентное соотношение), чтобы определять номер оставшегося человека J<sub>n</sub>, если всего их было n, простыми вычислениями.</p>
</article>

<!-- 0 человек -->
<article class="article">
  <div class="anchor" id="flav0"></div>
  <h3>0 человек</h3>

  <code>n = 0</code>
  <code>J<sub>0</sub> = 0</code>
</article>


<!-- 1 человек -->
<article class="article">
  <div class="anchor" id="flav1"></div>
  <h3>1 человек</h3>

  <code>n = 1</code>
  <code>J<sub>1</sub> = 1</code>
</article>


<!-- 2 человека -->
<article class="article">
  <div class="anchor" id="flav2"></div>
  <h3>2 человека</h3>

  <code>n = 2</code>
  <code>J<sub>2</sub> = 1</code>
</article>


<!-- 3 человека -->
<article class="article">
  <div class="anchor" id="flav3"></div>
  <h3>3 человека</h3>

  <code>n = 3</code>
  <code>J<sub>3</sub> = 3</code>
</article>


<!-- 2n человек -->
<article class="article">
  <div class="anchor" id="flav4"></div>
  <h3>2n человек</h3>

  <p>При четном числе, по кругу стоят 2n человек</p>
  <code>1, 2, ... , 2n-1, 2n</code>
  <p>Считать начинаем с 1. Проходим по кругу и вычеркиваем все четные числа от 2 до 2n. Остались числа
  <code>1, 3, ... , 2n-3, 2n-1</code>
  <p>Которых может быть четное или нечетное количество. Опять начинаем с 1 и вычеркиваем каждое второе.</p>
  <p>k-ое число в этом списке имеет вид 2k-1 (потому что второй раз в круге остались только нечетные числа). Если вместо каждого числа 2k-1 мы напишем просто k, то у нас получится та же самая задача, только для меньшего количества чисел. Если ответ на эту задачу J<sub>n</sub>, то ответ на исходную будет 2J<sub>n</sub>-1, потому что мы заменили все 2k-1 на k.</p>

  <code>2n</code>
  <code>J<sub>2n</sub> = 2J<sub>n</sub> - 1</code>
</article>


<!-- 2n+1 человека -->
<article class="article">
  <div class="anchor" id="flav5"></div>
  <h3>2n+1 человека</h3>

  <p>При нечетном числе по кругу стоят 2n+1 человек</p>
  <code>1, 2, ... , 2n, 2n+1</code>
  <p>Считать начинаем с 1. Проходим по кругу и вычеркиваем все четные числа от 2 до 2n. Остались числа
  <code>2n+1, 1, 3, ... , 2n-3, 2n-1</code>
  <p>Которых может быть четное или нечетное количество. Теперь начинаем с 2n+1 и вычеркиваем каждое второе. Из-за этого мы вычеркиваем единицу.</p>
  <p>k-ое число в этом списке имеет вид 2k+1 (потому что второй раз в круге остались только нечетные числа). Если вместо каждого числа 2k+1 мы напишем просто k, то у нас получится та же самая задача, только для меньшего количества чисел. Если ответ на эту задачу J<sub>n</sub>, то ответ на исходную будет 2J<sub>n</sub>+1, потому что мы заменили все 2k+1 на k.</p>

  <code>2n+1</code>
  <code>J<sub>2n+1</sub> = 2J<sub>2n</sub> + 1</code>
</article>


<!-- Рекуррентное соотношение -->
<article class="article">
  <div class="anchor" id="flavr"></div>
  <h3>Рекуррентное соотношение</h3>

  <p>Вычислять J<sub>n</sub> в зависимости от n будет быстрее, чем в предыдущих задачах. Ведь на каждом шаге значение n уменьшается в два раза, а не на единицу</p>

  <code>J<sub>1</sub> = 1</code>
  <code>J<sub>2n</sub> = 2J<sub>n</sub> - 1</code>
  <code>J<sub>2n+1</sub> = 2J<sub>2n</sub> + 1</code>
</article>


<!-- 1.5 Лягушка и шестиугольник (18) -->
<article class="article">
  <div class="anchor" id="p1.5"></div>
  <h3>1.5 Лягушка и шестиугольник (18)</h3>

  <p><a href="#frog">Лягушка и шестиугольник</a></p>
  <p><a href="#frog0">0 прыжков</a></p>
  <p><a href="#frog1">1 прыжок</a></p>
  <p><a href="#frog2">2 прыжка</a></p>
  <p><a href="#frog3">3 прыжка</a></p>
  <p><a href="#frog4">4 прыжка</a></p>
  <p><a href="#frogn">n прыжков</a></p>
  <p><a href="#frogr">Рекуррентное соотношение</a></p>
  <p><a href="#frogz">Замкнутое выражение</a></p>

  <p>Лягушка прыгает по вершинам шестиугольника ABCDEF, кажды раз перемещаясь в одну из соседних вершин. Сколькими способами она может попасть из A в C за n прыжков?</p>
</article>


<!-- 0 прыжков -->
<article class="article">
  <div class="anchor" id="frog0"></div>
  <h2>0 прыжков</h2>

  <p>Рассмотрим крайний случай. За 0 прыжков лягушка не попадет из вершины A на вершину C. Поэтому ответ - ноль способов</p>

  <code>n = 0</code>
  <code>C<sub>0</sub> = 0</code>
</article>


<!-- 1 прыжок -->
<article class="article">
  <div class="anchor" id="frog1"></div>
  <h2>1 прыжок</h2>

  <p>За один прыжок лягушка из вершины A может попасть только в вершины B и F. Потому что есть только два пути</p>
  <code>AB, AF</code>
  <p>Поэтому ответ - ноль способов</p>

  <code>n = 1</code>
  <code>C<sub>1</sub> = 0</code>
</article>


<!-- 2 прыжка -->
<article class="article">
  <div class="anchor" id="frog2"></div>
  <h2>2 прыжка</h2>

  <p>За два прыжка у лягушки могут быть четыре пути</p>
  <code>ABC, ABA, AFE, AFA</code>
  <p>Только один путь приведет ее в конце в вершину C</p>

  <code>n = 2</code>
  <code>C<sub>2</sub> = 1</code>
</article>


<!-- 3 прыжка -->
<article class="article">
  <div class="anchor" id="frog3"></div>
  <h2>3 прыжка</h2>

  <p>За три прыжка у лягушки могут быть следующие пути</p>
  <code>ABCD, ABCB, ABAB, ABAF, AFEF, AFED, AFAF, AFAB</code> . Ни один путь не приведет ее в конце в вершину C</p>

  <code>n = 3</code>
  <code>C<sub>3</sub> = 0</code>
</article>


<!-- 2 Вычисление рекуррентностей на компьютере (29) -->
<article class="article">
  <div class="anchor" id="p2"></div>
  <h2>2 Вычисление рекуррентностей на компьютере (29)</h2>
</article>


<!-- 3 Динамическое программирование (49) -->
<article class="article">
  <div class="anchor" id="p3"></div>
  <h2>3 Динамическое программирование (49)</h2>
</article>


<!-- 4 Динамическое программирование и одно целое число (53) -->
<article class="article">
  <div class="anchor" id="p4"></div>
  <h2>4 Динамическое программирование и одно целое число (53)</h2>
</article>


<!-- 5 Динамическое программирование и два целых числа (67) -->
<article class="article">
  <div class="anchor" id="p5"></div>
  <h2>5 Динамическое программирование и два целых числа (67)</h2>
</article>


<!-- 6 Динамическое программирование и одномерные массивы (79) -->
<article class="article">
  <div class="anchor" id="p6"></div>
  <h2>6 Динамическое программирование и одномерные массивы (79)</h2>
</article>


<!-- 7 Динамическое программирование и последовательности (93) -->
<article class="article">
  <div class="anchor" id="p7"></div>
  <h2>7 Динамическое программирование и последовательности (93)</h2>
</article>


<!-- 8 Динамическое программирование и подмножества (105) -->
<article class="article">
  <div class="anchor" id="p8"></div>
  <h2>8 Динамическое программирование и подмножества (105)</h2>
</article>


<!-- 9 Динамическое программирование и матрицы (119) -->
<article class="article">
  <div class="anchor" id="p9"></div>
  <h2>9 Динамическое программирование и матрицы (119)</h2>
</article>


<!-- 10 Динамическое программирование по профилю (125) -->
<article class="article">
  <div class="anchor" id="p10"></div>
  <h2>10 Динамическое программирование по профилю (125)</h2>
</article>


<!-- 11 Динамическое программирование и игры с полной информацией (139) -->
<article class="article">
  <div class="anchor" id="p11"></div>
  <h2>11 Динамическое программирование и игры с полной информацией (139)</h2>
</article>


<!-- 12 Динамическое программирование и все-все-все (163) -->
<article class="article">
  <div class="anchor" id="p12"></div>
  <h2>12 Динамическое программирование и все-все-все (163)</h2>
</article>
