<h1>Конспект книги Питер Абель "Язык ассемблера для IBM PC и программирования"</h1>


<!-- Содержание -->
<div class="article article__content">
  <h2>Содержание</h2>

  <p><a href="#links">links</a></p>
  <p><a href="#about">about</a></p>
  <p><a href="#install">install</a></p>
  <p><a href="#pred">Предисловие</a></p>
  <p><a href="#g1">Глава 1. Введение в семейство компьютеров IBM PC</a></p>
</div>


<!-- links -->
<article class="article">
  <div class="anchor" id="links"></div>
  <h3>links</h3>

  <ul>
    <li><a href="https://www.dosbox.com/">dosbox.com</a> DOSBox эмулятор dos</li>
    <li><a href="https://dosbox-x.com/">dosbox-x.com</a> DOSBox-X эмулятор dos</li>
    <li><a href="http://old-dos.ru/index.php?page=files&mode=files&do=show&id=3552">old-dos.ru</a> debug из состава ms-dos</li>
    <li><a href="http://old-dos.ru/files/file_1458.html">old-dos.ru</a> Norton Commander</li>
    <li><a href="http://old-dos.ru/index.php?page=files&mode=files&do=show&id=169">old-dos.ru</a> Volkov Commander</li>
    <li><a href="https://www.old-games.ru/catalog/?platform=1">old-games.ru</a> Игры для DOS</li>
  </ul>
</article>


<!-- about -->
<article class="article">
  <div class="anchor" id="about"></div>
  <h3>about</h3>

  <p>Чтобы выполнять практические задания из этой книги, нужно подготовить свой компьютер. Поскольку на windows 10 нельзя запускать программы DOS, то необходимо установить DOSBox и необходимые программы для нее.</p>

</article>


<!-- install -->
<article class="article">
  <div class="anchor" id="install"></div>
  <h3>install</h3>

  <h4>Установка DOSBox</h4>
  <ol>
    <li>
      <p>Заходим на официальный сайт программы DOSBox</p>
      <code><a href="https://www.dosbox.com/">dosbox.com</a></code>
    </li>
    <li>
      <p>Выбираем пункт меню <strong>Downloads</strong> и в окне <strong>DOSBox (specific versions)</strong> выбираем <strong>Windows</strong>. На компьютер скачается файл установщик</p>
      <code>DOSBox0.74-3-win32-installer.exe (1458 Кб)</code>
    </li>
    <li>
      <p>Запускаем установщик и устанавливаем DOSBox в папку</p>
      <code>d:\programs\DOSBox-0.74-3</code>
    </li>
  </ol>

  <h4>Монтирование папки в качестве диска в DOSBox</h4>
  <ol>
    <li>
      <p>Создаем новую пустую папку</p>
      <code>d:\dos\</code>
    </li>
    <li>
      <p>Запускаем DOSBox и выполняем команду</p>
      <code>mount d d:\dos</code>
    </li>
    <li>
      <p>Переходим в смонтированный диск</p>
      <code>d:</code>
    </li>
  </ol>
  <p>Чтобы при каждом запуске программы не повторять эти действия снова, настроим конфигурацию на автоматическое монтирование диска при запуске программы</p>
  <ol>
    <li>
      <p>Запустим файл</p>
      <code>d:\Programs\DOSBox-0.74-3\DOSBox 0.74-3 Options.bat</code>
    </li>
    <li>
      <p>Откроется файл</p>
      <code>dosbox-0.74-3.conf</code>
      <p>Или откройте его самостоятельно в папке</p>
      <code>c:\Users\11001000\AppData\Local\DOSBox\</code>
    </li>
    <li>
      <p>В конце файла, после <strong>[autoexec]</strong> допишите две строчки</p>
      <code>mount d d:\dos</code>
      <code>d:</code>
    </li>
  </ol>

  <h4>Установка программы debug</h4>
  <ol>
    <li>
      <p>Заходим на сайт</p>
      <code><a href="http://old-dos.ru/index.php?page=files&mode=files&do=show&id=3552">old-dos.ru</a></code>
    </li>
    <li>
      <p>Скачиваем файл</p>
      <code>MS_DEBUG.ver.modified.Multi (rus).rar (34 Кб)</code>
    </li>
    <li>
      <p>Копируем из архива файл debug.exe в папку</p>
      <code>d:\dos\</code>
    </li>
  </ol>

</article>


<!-- Предисловие -->
<article class="article">
  <div class="anchor" id="pred"></div>
  <h3>Предисловие</h3>

  <p>Книга представляет собой учебное пособие по программированию на языке Ассемблер для персональных компьютеров, совместимых с IBM PC, адресованное прежде всего начинающим. Начать практическое программирование можно уже с первых страниц книги. Для работы с книгой необходим постоянный доступ к компьютеру.</p>
  <p>Название книги переведено неудачно. Предпочтительнее "Программирование на языке Ассемблер для IBM PC".</p>

  <ul>
    <li>Появление микропроцессоров в 60-е годы связано с разработкой интегральных схем</li>
    <li>В начале 70-х годов появились микрокомпьютеры на процессоре Intel 8008. Это перввое поколение микропроцессоров</li>
    <li>К 1974 г. появилось второе поколение микропроцессоров общего назначения Intel 8080</li>
    <li>В 1978 г. появились процессоры третьего поколения Intel 8086 с 16-разрядной шиной. Для поддержки более простых устройств и для совместимости с устройствами того времени Intel разработала разновидность процессора 8086 - процессор 8088 с 8-разрядной шиной</li>
    <li>В 1981 г. фирма IBM выбрала процессор Intel 8088 для ее персональных компьютеров</li>
    <li>Стали появляться улучшенные версии. Для процессора 8088 - процессор 80188, а для процессора 8086 - процессоры 80186, 80286 и 80386., которые обеспечивали дополнительные возможности и повысили мощность вычислений</li>
    <li>В 1984 г. появился процессор 80286, которые устанавливают в компьютерах IBM AT</li>
  </ul>

  <p>С этого времени распространение микрокомпьютеров стало причиной популярности языка Ассемблер. Программы на ассемблере требуют значительно меньше объема памяти и времени выполнения. Знание языка Ассемблер и машинного кода дает понимание архитектуры компьютера. В это же время большинство программистов пишут на языках Паскаль и Си, что проще при написании программ и помогает избежать технических особенностей конкретных компьютеров</p>
  <p>Языки высокого уровня разработаны чтобы избежать технических особенностей и различий конкретных компьютеров. Язык Ассемблер разработан для конкретного процессора. Для того чтобы написать программу на языке Ассемблер, для конкретного компьютера, важно знать его архитектуру.</p>
  <p>Для работы с книгой необходимы</p>

  <ul>
    <li>Доступ к персональному компьютеру IBM PC с минимальным объемом ОЗУ 64 Кб</li>
    <li>Знакомство с руководством по IBM PC</li>
    <li>Транслятор с языка Ассемблер, желательно последней версии</li>
    <li>Операционная система PC-DOS или MS_DOS, желательно последней версии</li>
  </ul>
  <p>Данная книга является одновременно и учебником и справочным пособием для работы. Необходимо тщательнро прорабатывать каждую главу и перечитывать материал, который не сразу ясен.</p>
</article>


<!-- Глава 1. Введение в семейство компьютеров IBM PC -->
<article class="article">
  <div class="anchor" id="g1"></div>
  <h3>Глава 1. Введение в семейство компьютеров IBM PC</h3>

  <h4>Биты и байты</h4>
  <p>В основе логики компьютера лежат понятия бита и байта. Благодаря им в компьютерной памяти представляются команды и данные.</p>
  <p>Программа в машинном коде состоит из различных сегментов памяти:</p>
  <ol>
    <li>Сегмент памяти для хранения данных</li>
    <li>Сегмент памяти для хранения машинных команд</li>
    <li>Сегмент памяти для хранения адресов (стек)</li>
  </ol>
  <p>Для выполнения арифметических действий, пересылки данных и адресации процессор имеет ряд регистров.</p>
  <p>Для выполнения программы компьютер помещает программу (машинные команды и данные) в ОЗУ.</p>
  <p>Минимальной единицей информации в компьютере являетя <strong>бит</strong>. Он имеет два состояния 1 (включен) или 0 (выключен)</p>
  <p>Группа из девяти бит представляет собой <strong>байт</strong>, восемь бит которого содержат данные и один бит - <strong>контроль на четность.</strong></p>
  <p>8 бит дают 256 различных комбинаций</p>
  <code>от 0000 0000 до 1111 1111</code>
  <p>8 бит могут использоваться для кодирования символов. С целью стандартизации в персональных компьютерах используется <strong>таблица ASCII</strong>. Например,</p>
  <code>символ * = 00101010 (43). Буква A = 01000001 (65)</code>
  <p><strong>Контроль на четность</strong> - количество единиц в байте всегда должно быть нечетно. Буква A имеет 3 единицы, поэтому контрольный бит для буквы A равен 0. Символ * имеет 2 единицы, поэтому контрольный бит для символа * равен 1. Если количество единиц в байте четно, то система выдает сообщение об ошибке.</p>
  <p>Биты в байте нумеруются от 0 до 7 справа налево</p>
  <code>7 6 5 4 3 2 1 0</code>
  <p>Число 2<sup>10</sup> равно 1024, что состовляет один килобайт.</p>
  <p>Процессор 8086 использует 16-разрядную архитектуру. Он имеет 16-разрядные регистры и 16-разрядную шину, которая позволяет за один раз пересылать 16 бит данных. 16 бит это два байта и называются словом</p>
  <p>Биты в слове нумеруются от 0 до 15 справа налево</p>
  <code>15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0</code>

  <h4>Двоичные числа</h4>
  <p>Компьютер может различать только нулевое и единичное состояние и поэтому работает только с числами в двоичной системе.</p>
  <p>Двоичное число не ограничивается только восемью битами. Процессор 8086 использует 16-разрядную архитектуру и оперирует 16-битовыми числами от 0 до 65535. С помощью преобразований можно обрабатывать 32-разрядные числа (от 0 до 4 294 967 295) и даже больше.</p>

  <h4>Положительные числа</h4>
  <p>Положительные числа имеют 0 в старшем разряде</p>
  <code>1 = 00000001</code>
  <code>2 = 00000010</code>
  <code>3 = 00000011</code>

  <h4>Отрицательные числа</h4>
  <p>Отрицательные числа имеют 1 в старшем разряде.</p>
  <p>Положительное и отрицательное число в сумме должны получить 0. Поэтому чтобы получить из положительного числа отрицательное используют двоичное дополнение - инвертируют все разряды положительного числа и прибавляют 1. Чтобы получить из отрицательного числа положительное также используют двоичное дополнение.</p>
  <code>-1 = 11111111</code>
  <code>-2 = 11111110</code>
  <code>-3 = 11111101</code>

  <p>Компьютер может сложить два числа, но не может вычесть. Двоичное вычитание выполняется просто: инвертируется знак вычитаемого и складываются два числа.</p>

  <h4>Шестнадцатеричные числа</h4>
  <p>Для просмотра байтов в памяти используюь 16-ричные числа. Слово (два байта) будет занимать в двоичном виде 32 знака на экране, а в шестнадцатиричном 4 знака. При отладке в программе dos debug используются 16-разрядные числа.</p>

  <h4>Сегменты</h4>
  <p>Сегмент это область памяти, которая начинается на границе параграфа, т.е. по любому адресу, кратному 16. Размер сегмента - ровно столько сколько необходимо для выполнения программы, но не более 64 Кб.</p>
  <p>Есть три главных сегмента:</p>
  <ol>
    <li>Сегмент кодов. Сегмент кодов содержит машинные команды, которые будут выполняться. Первая команда лежит вначале сегмента. Регистр сегмента кодов (CS) адресует данный сегмент и содержит адрес команды, которая должна выполняться. До начала программы регистр CS должен показывать на  начало сегмента кодов.</li>
    <li>Сегмент данных. Сегмент данных содержит данные, константы и свободные участки памяти, необходимые программе. Регистр сегмента данных (DS) адресует данный сегмент.</li>
    <li>Сегмент стека. Стек содержит адреса возврата из программы в операционную систему и из подпрограмм в основную программу. Регистр сегмента стека (SS) адресует данный сегмент</li>
  </ol>
  <p>Три сегментных регистра содержат начальные адреса сегментов и каждый сегмент начинается на границе параграфа.</p>
  <p>Есть один дополнительный сегмент</p>
  <ol>
    <li>Дополнительный сегмент предназначен для специального использования. Регистр дополнительного сегмента (ES) адресует данный сегмент.</li>
  </ol>
  <p>Внутри программы все адреса памяти являются смещением относительно начала сегмента. Двухбайтовое смещение (16 бит) может быть в пределах</p>
  <code>от 0000 до FFFF (от 0 до 65535)</code>
  <p>Для обращения к любому адресу в программе компьютер складывает адрес в регистре сегмента и смещение. Первый байт в сегменте кодов имеет смещение 0, второй байт - 1 и т.д. до смещения 65535.</p>
  <p>В регистре сегмента 16 бит (от 0000 до FFF0), поскольку адрес в регистре сегмента должен быть кратным 16-ти, поэтому младший байт всегда равен нулю. Число FFF0 позволяет адресовать 65520 (плюс смещение) байт. Но специалисты решили, что нет смысла хранить биты которые всегда равны нулю. Поэтому младший нулевой байт в регистр сегмента не пишут, а добавляют еще один старший байт. Таким образом число FFFF (FFFF0 с младшим нулевым байтом) позволяет адресовать 1048560 байт</p>

  <h4>Регистры</h4>
  <p>Процессоры 8086/8088 имеют 14 регистров, которые адресуются по имени. Каждый регистр имеет размер 16 бит. Биты в регистре нумеруются слева направо</p>

  <p>Сегментные регистры CS, DS, SS, ES</p>

</article>

