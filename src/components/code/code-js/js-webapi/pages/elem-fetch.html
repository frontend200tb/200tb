<h1>Fetch (window.fetch)</h1>


<!-- Содержание -->
<article class="article">
  <h2>Содержание</h2>

  <p><a href="#links">links</a></p>
  <p><a href="#about">about</a></p>
  <p><a href="#async">fetch с async/await</a></p>
</article>


<!-- links -->
<article class="article">
  <div class="anchor" id="links"></div>
  <h2>links</h2>

  <p><a href="https://developer.mozilla.org/ru/docs/Web/API/Fetch_API">developer.mozilla.org</a></p>
  <p><a href="https://learn.javascript.ru/fetch">learn.javascript.ru/fetch</a></p>
  <p><a href="https://doka.guide/js/fetch/">doka.guide/js/fetch</a></p>
  <p><a href="https://metanit.com/web/javascript/20.1.php">metanit.com</a></p>
</article>


<!-- about -->
<article class="article">
  <div class="anchor" id="about"></div>
  <h2>about</h2>

  <p>Браузер предоставляет глобальный API для работы с запросами и ответами HTTP. Раньше для подобной работы использовался XMLHttpRequest, однако fetch() более гибкая и мощная альтернатива, он понятнее и проще в использовании из-за того, что использует Promise.</p>
  <p>Метод fetch() принимает один обязательный аргумент — путь к данным, которые вы хотите получить. Он возвращает promise, который разрешается в (Response) независимо от того, был ли запрос удачным. Вы можете также передать во втором аргументе необязательный объект конфигурации, в котором можно настроить метод запроса, тело запроса, заголовки и многое другое.</p>
  <code>let promise = fetch(url, [options]);</code>
  <ul>
    <li>url – URL для отправки запроса.</li>
    <li>options – дополнительные параметры: метод, заголовки и так далее.</li>
  </ul>
  <p>Без options это простой GET-запрос, скачивающий содержимое по адресу url.</p>
  <p>Браузер сразу же начинает запрос и возвращает промис, который внешний код использует для получения результата.</p>
  <code>fetch('http://jsonplaceholder.typicode.com/posts');</code>

  <p>Результатом вызова fetch() будет Promise, в котором будет содержаться специальный объект ответа Response. У этого объекта есть два важных для нас поля:</p>
  <ol>
    <li>ok — принимает состояние true или false и сообщает об успешности запроса;</li>
    <li>json — метод, вызов которого, возвращает результат запроса в виде json.</li>
    <li>text — метод, вызов которого, возвращает результат запроса в виде текста.</li>
  </ol>
  <p>Важное замечание: после первого вызова метода json или text, второй раз вызвать эти методы уже будет нельзя так как ответ уже получен.</p>
  
  <h4>Задача. Забрать данные с сервера</h4>
  <p>Получим значение, которое возвращает fetch (это будет промис)</p>
  <code>let promise = fetch('http://jsonplaceholder.typicode.com/posts');</code>

  <p>Получим данные, когда промис будет выполнен</p>
  <code>let data = promise.then((response) => response.json());</code>

  <p>Промисы можно чейнить</p>
<pre>let data = fetch('http://jsonplaceholder.typicode.com/posts').then((response) => response.json());</pre>
</article>


<!-- fetch с async/await -->
<article class="article">
  <div class="anchor" id="async"></div>
  <h2>fetch с async/await</h2>

  <p>Поскольку функция fetch() возвращает Promise, то вместо нанизывания методов then() мы можем использовать операторы async/await для извлечения ответа.</p>
  
  <h4>Задача. Написать асинхронную функцию, которая забирает данные с сервера</h4>
<pre>async function getData() {
  // получаем объект ответа
  const response = await fetch("http://jsonplaceholder.typicode.com/posts");
  // из объекта ответа извлекаем данные ответа
  const responseData = await response.json();
  console.log(responseData);
}</pre>
</article>






