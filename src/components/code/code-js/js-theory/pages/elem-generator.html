<h1>Генераторы</h1>


<!-- Содержание -->
<article class="article">
  <h2>Содержание</h2>

  <p><a href="#about">Генераторы</a></p>
  <p><a href="#task1">Задание 1. Перебор текста по словам</a></p>
</article>


<!-- about -->
<article class="article">
  <div class="anchor" id="about"></div>
  <h2>Генераторы</h2>

  <p>Генераторы позволяют писать плоский асинхронный код. За счет генераторов создаются async и await. При вызове генератора выполняется код генератора до ключевого слова yield. Затем yield возвращает значение из генератора. При следующем вызове генератора продолжает выполнятся его код после предыдущего вызова yield и до следующего вызова yield.</p>

  <details>
    <summary>Перебор генератора в цикле for of</summary>
<pre>function* some() {
  console.log('yield a');
  yield 'a';
  console.log('yield b');
  yield 'b';
  console.log('yield c');
  yield 'c';
}

for (let a of some()) {
  console.log(a);
}</pre>
  </details>
</article>


<!-- Задание 1 -->
<article class="article">
  <div class="anchor" id="task1"></div>
  <h2>Задание 1. Перебор текста по словам</h2>

  <p>Перебор текста по словам без создания массива. Написать генератор, на вход которого приходит строка, а на выход он выдает по одному слову, которые разделены пробелами</p>

  <details>
    <summary>Решение</summary>
<pre>function cleanStr(str) {
  return str.trim().replace(/ +/g, ' ');
}

function wordsCount(str) {
  return cleanStr(str).split(' ').length;
}

function* getWords(str) {
  // 'всем привет ура ура'
  let text = cleanStr(str) + ' ';
  let start = 0;
  let current = text.indexOf(' ', start);

  while (current !== -1) {
    yield text.substr(start, current - start);
    start = current + 1;
    current = text.indexOf(' ', start);
  }
}

let s = 'всем привет ура ура';

console.log(wordsCount(s));
for (let word of getWords(s)) {
  console.log(word)
}</pre>  
  </details>
</article>


